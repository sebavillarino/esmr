% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/esm-utils.R
\name{esm_aggregate}
\alias{esm_aggregate}
\title{Aggregate ESM or FD results by treatment and depth}
\usage{
esm_aggregate(data, var, group_by = c("trt", "lower"), se = TRUE, na.rm = TRUE)
}
\arguments{
\item{data}{A data frame produced by \code{\link[=esm]{esm()}}.}

\item{var}{Character string. The response variable name (e.g., \code{"SOC"}).}

\item{group_by}{Optional character vector with columns to aggregate by.
Defaults to \code{c("trt", "lower")}.}

\item{se}{Logical. If \code{TRUE}, computes standard error of the mean. Default = \code{TRUE}.}

\item{na.rm}{Logical. Remove \code{NA} before summarising. Default = \code{TRUE}.}
}
\value{
A tibble with mean Â± sd (and se if requested) by the specified groups.
}
\description{
Summarises the outputs from \code{\link[=esm]{esm()}} (either ESM or fixed-depth) by treatment,
depth, and optionally replicate or site. This helper function computes means,
standard deviations, and standard errors for stocks or properties (e.g., SOC, N, P).
}
\details{
The function automatically identifies columns ending with \verb{_g_cm2} or
\code{Cum_..._g_cm2} to aggregate in the same units.
}
\examples{
\dontrun{
esm <- esm(df, som = FALSE, soc_col = "SOC", rvar = "SOC", output = "esm")
esm_aggregate(esm, var = "SOC")
}

}
\seealso{
\code{\link[=esm]{esm()}}, \code{\link[=as_Mg_ha]{as_Mg_ha()}}
}
