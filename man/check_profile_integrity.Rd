% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/check_profile_integrity.R
\name{check_profile_integrity}
\alias{check_profile_integrity}
\title{Check integrity of soil layer profiles (contiguity, zero start, min length)}
\usage{
check_profile_integrity(
  data,
  group = c("trt", "rep"),
  require_zero_start = TRUE,
  min_core_length_cm = 0
)
}
\arguments{
\item{data}{A data.frame/tibble with at least: \code{upper}, \code{lower} and grouping columns.}

\item{group}{Character vector of grouping columns defining a profile. Default: \code{c("trt","rep")}.}

\item{require_zero_start}{Logical; require the first layer to start at 0 cm. Default: \code{TRUE}.}

\item{min_core_length_cm}{Numeric; minimum required depth (cm). Default: \code{0}.}
}
\value{
A tibble with one row per profile and diagnostics:
\itemize{
\item \code{n_layers}, \code{zero_start_ok}, \code{strict_increase_ok}, \code{contiguous_ok},
\item \code{max_lower}, \code{meets_min_core}, and \code{ok} (all checks passed).
Additionally, \code{first_break_at_row} indicates where contiguity breaks (if any).
}
}
\description{
Validates that each (profile) defined by \code{group} columns has:
\enumerate{
\item layers sorted and strictly increasing,
\item starts at 0 cm (if \code{require_zero_start = TRUE}),
\item contiguity (\code{upper == lag(lower)}),
\item maximum depth >= \code{min_core_length_cm}.
}
}
\examples{
\dontrun{
diag <- check_profile_integrity(df, group = c("trt","rep"))
dplyr::filter(diag, !ok)
}

}
